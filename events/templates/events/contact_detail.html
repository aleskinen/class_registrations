{% extends "base_generic.html" %}

{% block content %}
  <h1>Name: {{ contact.last_name }}, {{ contact.first_name }}</h1>

  <p><strong>Contact:</strong> <a href="">{{ contact }}</a></p>
  <p><strong>Email:</strong> {{ contact.email }}</p>
  <p><strong>Phone:</strong> {{ contact.phone }}</p>

  <div style="margin-left:20px;margin-top:20px">
    <h4>Events</h4>
  
    {% if contact.event_set.all %}
      <ul>
        {% for event in contact.event_set.all %}
          <li>
            <a href="{{ event.get_absolute_url }}">{{ event.title }}</a>
            {% if event.eventinstance_set.all %}
              <ul style="margin-top:6px;">
                {% for instance in event.eventinstance_set.all %}
                  {% if instance.date and instance.status == 'n' %}
                    <li class="text-muted">{{ instance.date }} â€” {{ instance.description }}</li>
                  {% endif %}
                {% endfor %}
              </ul>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No events associated with this contact.</p>
    {% endif %}
  </div>
{% endblock %}
